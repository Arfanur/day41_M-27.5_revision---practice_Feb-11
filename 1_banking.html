<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking Page</title>
    <script src="https://cdn.tailwindcss.com"></script>

</head>

<body>
    <header>
        <h1 class="text-5xl text-center mt-8">Let's get some<span
                class="font-semibold text-purple-600">Mooooony</span>!!!</h1>
    </header>
    <main class="w-3/4 mx-auto">
        <!-- Balance and Transaction -->
        <section class="mt-8">
            <div class="grid grid-cols-3 gap-4 text-white">
                <div class="bg-blue-300 p-8 rounded">
                    <h3 class="text-2xl">Deposit</h3>
                    <h4 class="text-4xl">$<span id="deposit-total">00</span></h4>
                </div>
                <div class="bg-green-300 p-8 rounded">
                    <h3 class="text-2xl">Withdraw</h3>
                    <h4 class="text-4xl">$<span id="withdraw-total">00</span></h4>
                </div>
                <div class="bg-yellow-300 p-8 rounded">
                    <h3 class="text-2xl">Balance</h3>
                    <h4 class="text-4xl">$<span id="balance-total">1200</span></h4>
                </div>
            </div>
        </section>
        <!-- Deposit and Withdraw -->
        <section>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-red-100 mt-8 p-8 rounded">
                    <h3 class="text-2xl">Please Deposit</h3>
                    <div action="">
                        <input id="deposit-input" class="border block border-gray-400 rounded w-3/4 mb-4 px-2"
                            type="text" placeholder="$ amount you want to Deposit ">
                        <button id="deposit-button"
                            class="bg-yellow-600 px-4 py-2 rounded text-white font-medium">Deposit</button>
                    </div>
                </div>
                <div class="bg-purple-100 mt-8 p-8 rounded">
                    <h3 class="text-2xl">Please Withdraw</h3>
                    <div action="">
                        <input id="withdraw-input" class="border block border-gray-400 rounded w-3/4 mb-4 px-2"
                            type="text" placeholder="$ amount you want to Withdraw">
                        <button id="withdraw-button"
                            class="bg-yellow-600 px-4 py-2 rounded text-white font-medium">Withdraw</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script>

        function getInputField(inputId) {                           // input
            const inputField = document.getElementById(inputId);    // input element
            const amountValue = parseFloat(inputField.value);       // input parseFloat

            // clear deposit input field
            inputField.value = '';
            
            return amountValue;                                     // return: input parseFloat
        }

        function updateTotalField(totalFieldId, amount) {           // previous(h4), input
            const totalElement = document.getElementById(totalFieldId); // previous element
            const previousTotal = parseFloat(totalElement.innerText);   // previous parseFloat

            totalElement.innerText = previousTotal + amount;        // come back: current amount (previous amount(h4) + input amount)
        }

        function getCurrentBalance() {                              // previous balance
            const balanceTotal = document.getElementById('balance-total');
            const previousBalanceTotal = parseFloat(balanceTotal.innerText);

            return previousBalanceTotal;                            // come back: previous balance parseFloat number
        }

        function updateBalance(amount, isAdd) {                     // input, boolean
            const balanceTotal = document.getElementById('balance-total');  // previous balance(h4) element
            const previousBalanceTotal = getCurrentBalance();       // come back: previous balance parseFloat number
            if (isAdd == true) {
                balanceTotal.innerText = previousBalanceTotal + amount; // previous + input
            }
            else {
                balanceTotal.innerText = previousBalanceTotal - amount; // previous - input
            }


        }

        //   handle Deposit button
        document.getElementById('deposit-button').addEventListener('click', function () {

            const depositAmount = getInputField('deposit-input');   // come back: input deposit parseFloat number
            if (depositAmount > 0) {
                updateTotalField('deposit-total', depositAmount);    // come back: current deposit amount (previous deposit + input deposit)
                updateBalance(depositAmount, true);     // come back: current balance (previous(h4) balance + input balance)
            }
        });

        // handle withdraw button
        document.getElementById('withdraw-button').addEventListener('click', function () {
            const withdrawAmount = getInputField('withdraw-input');     // come back: input withdraw parseFloat number
            const currentBalance = getCurrentBalance(); // previous balance parseFloat
            if (withdrawAmount > 0 && withdrawAmount < currentBalance) {
                updateTotalField('withdraw-total', withdrawAmount);      // come back: current withdraw amount (previous withdraw(h4) + input withdraw)
                updateBalance(withdrawAmount, false);   // come back: current balance (previous(h4) balance - input balance)
            }
        })

    </script>
    <script src="js/1_banking.js"></script>
</body>

</html>